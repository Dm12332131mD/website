"use strict";

// Imports
const abs = require("../functions/absolute.js");
const format = require("./format.js");
const parse = require("./parse.js");

/**
 * Shifts the decimal point of a number-like value
 * @param {string|number} v Number-like value
 * @param {string|number} l Amount to shift
 * @returns 
 */
function shift(v, l) {
    if(isNaN(v) || isNaN(l ?? 0)) throw new TypeError("Argument is not a number-like value");
    let { array: fa, length: fl } = format([parse(v)], false);
    let i = fa[0], il = parseInt(l ?? 0) + fl;
    if(parseInt(v) < 0) return `-${shift(i.slice(1), il)}`;
    let dl = Math.max(i.length - il, 0);
    let tr = `${i.slice(0, dl)}${"0".repeat(abs(Math.min(il, 0)))}.${i.slice(dl).padStart(il, "0")}`.replace(/^0+|0+$/g, "");
    if(tr.startsWith(".")) tr = "0" + tr;
    if(tr.endsWith(".")) tr = tr.slice(0, -1);
    return tr;
};

// Exports
module.exports = shift;