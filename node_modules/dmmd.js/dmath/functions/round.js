"use strict";

// Imports
const abs = require("./absolute.js");
const ceil = require("./ceil.js");
const floor = require("./floor.js");
const neg = require("./negative.js");
const parse = require("../utils/parse.js");
const shift = require("../utils/shift.js");

/**
 * Rounds a number-like value to the closest number
 * @param {string|number} v Number-like value
 * @param {?string|number} d Decimal place
 * @returns 
 */
function round(v, d) {
    if(isNaN(v)) throw new TypeError("Argument is not a number-like value");
    if(parseFloat(v) < 0) return neg(round(abs(v), d ?? 0));
    let n = shift(v, neg(d ?? 0)), [,, dec] = parse(n);
    return shift(parseInt(dec ?? "0") >= 5 ? ceil(n) : floor(n), d ?? 0);
};

module.exports = round;