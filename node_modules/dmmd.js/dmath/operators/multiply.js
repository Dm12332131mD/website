"use strict";

// Imports
const abs = require("../functions/absolute.js");
const format = require("../utils/format.js");
const neg = require("../functions/negative.js");
const parse = require("../utils/parse.js");
const shift = require("../utils/shift.js");

/**
 * Multiplies two number-like values
 * @param {string|number} a Number-like value
 * @param {string|number} b Number-like value
 * @returns {string}
 */
function multiply(a, b) {
    let plus = require("./plus.js");
    let [ fla, flb ] = [ a, b ].map(parseFloat);
    if(fla < 0 && flb < 0) return multiply(abs(a), abs(b));
    else if(fla < 0 || flb < 0) return neg(multiply(abs(a), abs(b)));
    let { array: fa, length: fl } = format([ a, b ].map(parse), false);
    let [ daa, dab ] = fa.map(fn => fn.split("").reverse());
    let r = [];
    dab.forEach((dvb, dib) => daa.forEach((dva, dia) => r.push(`${dva * dvb}${"0".repeat(dia + dib)}`)));
    return shift(r.reduce(plus, 0), fl * 2);
};

// Exports
module.exports = multiply;